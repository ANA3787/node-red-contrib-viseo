<script type="text/javascript">
    RED.nodes.registerType('nedb',{
        category: 'config',
        color: '#3FADB5',
        defaults: { 
            name:      { value: undefined },
            path:      { value: undefined },
            xlsx:      { value: undefined }
            
        },
        inputs:  1,
        outputs: 1,
        icon: "",
        align: "left",
        paletteLabel: "NeDB",
        label: function() { 
            if(this.name) {
                return this.name;
            }
            return this.path.substring(this.path.lastIndexOf('/') + 1, this.path.lastIndexOf('.'));            
        },
        oneditprepare: function() {
            $("#node-config-input-path").typedInput({ default: 'str', types: ['str'], type: 'str' });
            $("#node-config-input-xlsx").typedInput({ default: 'num', types: ['num'], type: 'num' });
        },
    });
</script>

<script type="text/x-red" data-template-name="nedb">
    <div class="form-row">
        <label for="node-config-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-config-input-name" placeholder="Name">
    </div>
    
    <br>
    <b>DB File</b>
    <div class="form-row">
        <br>
        <label for="node-config-input-path"><i class="fa fa-file"></i> Path</label>
        <input type="text" id="node-config-input-path" placeholder="{cwd}/data/database.db">
    </div>

    <br>
    <b>XLSX File (only)</b>
    <div class="form-row">
        <br>
        <label for="node-config-input-xlsx"><i class="fa fa-table"></i> XLSX Tab</label>
        <input type="text" id="node-config-input-xlsx" placeholder="0">
    </div>
   
</script>

<script type="text/x-red" data-help-name="nedb">

    <p>Configuration to connect the NoSQL node to a NeDB database. </p>

    <h3>Details</h3>
    <p>Properties</p>
    <dl class="message-properties">
        <dt>Path <span class="property-type">string</span></dt>
        <dd>path to the local NeDB file</dd>
        <dt>XLSX Tab <span class="property-type">string</span></dt>
        <dd>tab to use to import the data (xlsx only)</dd>
    </dl>
    <p>If the file is a <i>XLSX</i>, precise the tab (number). The tab  content will be imported to a NeDB database (<b>readonly</b>.)</p>
    
</script>