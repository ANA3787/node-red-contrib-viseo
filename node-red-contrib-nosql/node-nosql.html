<script type="text/javascript">
    RED.nodes.registerType('nosql',{
        category: 'VISEO_DB',
        color: '#3FADB5',
        defaults: { 
            name:               { value: undefined },
            type:               { value: undefined }, 
            server:             { value: undefined }, 
            "server-mongo" :    { value: undefined, type: "mongodb" }, 
            collection:         { value: undefined },
            key:                { value: undefined },
            value:              { value: undefined },
            operation:          { value: undefined },
            merge:              { value: undefined }
        },
        inputs:  1,
        outputs: 1,
        icon: "db.svg",
        align: "left",
        paletteLabel: "NoSQL",
        label: function() { return this.name || this.collection || "no SQL" }
    });
</script>

<script type="text/x-red" data-template-name="nosql">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>

    <h4 style="border-bottom: 1px solid #AAA; margin: 1em 0em 1em 0em;">Config</h4>
    <div class="form-row">
        <label for="node-input-type"><i class="icon-tag"></i> Source</label>
        <select id="node-input-type" style="width:125px">
            <option value="nedb">NeDB</option>
            <option value="mongodb">MongoDB</option>
            <option value="cosmodb">CosmoDB</option>
            <option value="firebase">Firebase</option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-server-mongo"><i class="icon-tag"></i> Mongo Config</label>
        <input type="text" id="node-input-server-mongo">
    </div>
   

    <h4 style="border-bottom: 1px solid #AAA; margin: 1em 0em 1em 0em;">Query</h4>
     <div class="form-row">
        <label for="node-input-collection"><i class="icon-tag"></i> Collection</label>
        <input type="text" id="node-input-collection" placeholder="collection">
    </div>
    <div class="form-row">
        <label for="node-input-key"><i class="icon-tag"></i> Key</label>
        <input type="text" id="node-input-key" placeholder="payload">
    </div>
    <div class="form-row">
        <label for="node-input-value"><i class="icon-tag"></i> Value</label>
        <input type="text" id="node-input-value" placeholder="payload">
    </div>
    <div class="form-row">
        <label for="node-input-operation"><i class="icon-tag"></i> Operation</label>
        <select id="node-input-operation" style="width:125px">
            <option value="set">set</option>
            <option value="get">get</option>
            <option value="update">update</option>
            <option value="find">find</option>
            <option value="add">add</option>
            <option value="delete">delete</option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-merge"></label>
        <input type="checkbox" style="width: auto;" id="node-input-merge"> <span style="font-size: 12px">(merge GET with existing property)</span>
    </div>
</script>

<script type="text/x-red" data-help-name="nosql">
    Retrieve or Save an object of the data flow according to a data flow id.
    For instance, to retrieve or save a data.user then set key=data.user.id and value=data.user 
    For a get, if the user already exists in the flow then it is merged with new one  
    <h2>Fields</h2>
    <ul>
        <li><b>Name:</b> can be used to override the default name of the node.</li>
        <li><b>Key:</b> filled with the property used as the key (mandatory). </li>
        <li><b>Value:</b> filled with the property used as the value (mandatory).</li>
        <li><b>Operation:</b> <i>set</i> is used to store the value. <i>get</i> is used to 
        fetch the value according to a given id. <i>find</i> query database with JSON key</li>
    </ul>
</script>